include /_mixins.pug

doctype html
html(lang="en-GB")
	head
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104159380-5"></script>
		script.
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-104159380-5');

		meta(charset="UTF-8")
		link(href="/style.css", rel="stylesheet")

		-
			const global =
				{ name:    "sumi"
				, twitter: "sumigv"
				};

		script.
			window.addEventListener("load", () => {
				var global =
					{ name:    "sumi"
					, twitter: "sumigv"
					};

				// mobile menu switch
				const sw = document.getElementById("nav-switch");
				const nav = document.getElementsByTagName("nav")[0];
				sw.onclick = () => {
					if(nav.style["display"] === "none") {
						nav.style["display"] = "block";
						sw.innerText = "▲";
					} else {
						nav.style["display"] = "none";
						sw.innerText = "▼";
					}
				};

				// submenu
				const section = document.getElementsByTagName("section")[0];
				const subsections = Array.prototype.filter.call(section.childNodes, child => child.tagName === "SECTION");
				const submnu = document.getElementById("submenu");

				if(subsections.length > 0) {
					let ul = document.createElement("ul");
					ul.setAttribute("id", "sub-menu");
					for(let subsection of subsections) {
						const title = subsection.getAttribute("id")
						let a = document.createElement("a")
						a.setAttribute("href", "#" + title);
						a.append(document.createTextNode(title));
						let li = document.createElement("li")
						li.append(a);
						ul.append(li);
					}
					submenu.append(ul);
				} else {
					submenu.remove();
				}
			});

		script(src="/works/calendar/calendar.js")
		script.
			// date
			setInterval(() => {
				const [year, isLeap, yearday, month, monthday, week, weekday, dayName, daytime] = dateToSc(new Date());
				document.getElementById("datetime").innerText =
					`SC//${year.toString(16)}/${month.toString(16)}/`
					+ (monthday + daytime).toString(16).slice(0, 6);
			}, 100);

		block head
		title= title

	body
		div#nav-switch ▼
		nav
			div#nav-in
				div#logo
					a(href="/"): img(src="/images/sumi.png")
				div#datetime
				+myDiv("menu", showsTitle=false)#menu
					ul
						li: a(href="/author") author
						li: a(href="/suzuri") suzuri
						li: a(href="/favorite") favorite
						li: a(href="/thoughts") thoughts
						li: a(href="/works") works

					+myDiv("submenu", showsTitle=false)#submenu

				center
					<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="true" data-via="melanophil">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

			//<a class="twitter-timeline" data-theme="dark" href="https://twitter.com/sumigv">Tweets by sumigv</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

		main
			article
				p the author designed this website for desktop, not for mobile.
				p this site uses Google Analytics.

				+mySection(title)
					block main

				+mySection("comment")
					div(id="disqus_thread")
					script.
						var disqus_config = function () {
							this.page.url = "http://sumi.space";
							this.page.identifier = "sumi";
						};
						(function() { // DON'T EDIT BELOW THIS LINE
						var d = document, s = d.createElement('script');
						s.src = 'https://sumi-2.disqus.com/embed.js';
						s.setAttribute('data-timestamp', +new Date());
						(d.head || d.body).appendChild(s);
						})();
					noscript
						| Please enable JavaScript to view the
						a(href="https://disqus.com/?ref_noscript") comments powered by Disqus.
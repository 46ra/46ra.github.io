include /_mixins.pug

block vars

doctype html
html(lang="en-GB")
	head
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104159380-5"></script>
		script.
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'UA-104159380-5');

		meta(charset="UTF-8")
		title= title
		link(href="/style.css", rel="stylesheet")

		script.
			document.title = window.location.href
				.replace(/\/$/, "")
				.replace(/.+sumi\.space/, "sumi")
				.replace("/", " / ");

			window.addEventListener("load", () => {
				document.getElementById("nav-switch").onclick = () => {
					let e = document.getElementsByTagName("nav")[0];
					e.style["display"] = e.style["display"] === "none" ? "block" : "none";
				}
			});

			window.addEventListener("load", () => {
				const section = document.getElementsByTagName("section")[0];
				const subsections = Array.prototype.filter.call(section.childNodes, child => child.tagName === "SECTION");

				if(subsections.length > 0) {
					let ul = document.createElement("ul");
					ul.setAttribute("id", "sub-menu");
					for(let subsection of subsections) {
						const title = subsection.getAttribute("id")
						let a = document.createElement("a")
						a.setAttribute("href", "#" + title);
						a.append(document.createTextNode(title));
						let li = document.createElement("li")
						li.append(a);
						ul.append(li);
					}
					document.getElementsByTagName("nav")[0].appendChild(ul);
				}
			});

	body
		label#nav-switch â˜°
		nav
			center
				a(href="/"): img(src="/images/sumi.png")

			ul
				li: a(href="/suzuri") suzuri
				li: a(href="/favorite") favorite
				li: a(href="/thoughts") thoughts
				li: a(href="/works") works

		main
			article
				div(align="right")
					<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="true" data-via="melanophil">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				p.mobile this website is designed for desktop.

				block main

				+mySection("comment")
					div(id="disqus_thread")
					script.
						var disqus_config = function () {
							this.page.url = "http://sumi.space";
							this.page.identifier = "sumi";
						};
						(function() { // DON'T EDIT BELOW THIS LINE
						var d = document, s = d.createElement('script');
						s.src = 'https://sumi-2.disqus.com/embed.js';
						s.setAttribute('data-timestamp', +new Date());
						(d.head || d.body).appendChild(s);
						})();
					noscript
						| Please enable JavaScript to view the
						a(href="https://disqus.com/?ref_noscript") comments powered by Disqus.
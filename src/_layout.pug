doctype html

include /_mixins.pug

-
  const root = "https://sumi.space"
  const author =
    { id: "суми"
    , name:
      { han: ["墨", "幽"]
      , ja: ["ſumi", "juu"]
      , yue: ["mŋ̍", "qȷv̀"]
      , cmn: ["muè", "ıū"]
      }
    , twitter: "smiqy"
    , github: "smiqy"
    }
  const now = (() => {
    const date = new Date();
    const y = date.getFullYear() + 10000
    const d = (
      new Date(y, date.getMonth(), date.getDate()).getTime()
      - new Date(y, 0, 1).getTime()
    ) / (1000 * 60 * 60 * 24)
    return `${y}/${d}`
  })()

html
  head
    include _google-analytics.pug
    meta(charset="UTF-8")

    link(href="/style.css", rel="stylesheet")
    script(src="/script.js")

    // local files
    link(href="style.css", rel="stylesheet")
    script(src="script.js")

    link(rel="icon", href="/images/icon.ico")

    block head

    -
      const titleFull =
        title === author.id
          ? title
          : `${author.id} / ${title}`
    title= titleFull

    script.
      document.addEventListener("DOMContentLoaded", () => {
        for(const e of document.querySelectorAll(".undot")) {
          e.innerHTML = e.innerHTML.replace(/i/g, "ı").replace(/j/g, "ȷ")
        }
      })

    meta(name="twitter:site", content="@" + author.twitter)
    meta(name="twitter:title", content=titleFull)
    // meta(name="twitter:description", content=`${author.id}'s information.`)
    meta(name="twitter:image", content=`${root}/character/suzuri/images/2020-08-31.png`)
    meta(name="twitter:card", content="summary")

  body
    div#nav-switch
    div.center
      nav
        div#nav-in
          div#logo
            a(href="/")
              img(src="/images/sumi.png")
          div#datetime
          +div("menu")
            ul
              li: a.undot(href="/") /
              li: a.undot(href="/author") auþor
              li: a.undot(href="/characters") character
              li: a.undot(href="/favorite") favorite
              // li: a(href="/thought") thought
              li: a.undot(href="/work") work

            +div("submenu")

          center
            a(
              href="https://twitter.com/share?ref_src=twsrc%5Etfw"
              , class="twitter-share-button"
              , data-show-count="true"
              , data-via=author.twitter
            ) Tweet
            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    main
      article
        p þıs websıte use <it>google analytıcs</it>.

        //+section(title, [`when-updated=${now}`].concat(tags ? tags : []))
        +section(title, tags)
          block main

        +section("")
          include _discus.pug

extend /_layout.pug

mixin toTds(xs)
  for x in xs
    td
      if x && x[0] === "!"
        em= x.substring(1)
      else
        | #{x}


mixin toTrs(xss, sep="|")
  for xs in xss
    tr
      +toTds(xs.split(sep))


mixin sups(xs, sep, mid, end)
  for x, i in xs
    - let [a, b] = x.split(sep)
    if i !== 0
      | #{mid}
    | #{a}
    sup= b
  | #{end}

block head
  - var title = "orthography"
  link(rel="stylesheet", href="style.css")

block main
  p
    | the author
    ul
      li designed the systems below just to suit vis preference or aethetics
      li claims no exclusive orthodoxy of them
      li forces no one to use them
      li may make incompatible changes in them.
    | if some one however would like and try to use them, the author would be very glad.

  +mySection("japanese")
    p: em under construction

    center
      table sumi
        tbody.vowel
          tr
            +toTds("i|e|a|o|u".split("|"))
        tbody.consonant
          +toTrs(
            [ " | |k|g| |j"
            , "s|z|t|d|n|r"
            , " | |f|b|m|v|p"
            ])

    ul
      li represent any 促音‹ッ› from an entering tone by ‹k, t, f› e.g. 合算 gafsan.
      li represent any 促音‹ッ› in other cases by double consonants e.g.
      li represent any 撥音‹ン› from a マ行 (m) phoneme by ‹m› e.g.
      li represent any 撥音‹ン› in other cases by ‹n› e.g.
      li combine a verb-root and an ending with a hyphen U+002D ‹-›.
      li combine a noun and a case-particle with a double hyphen U+2E40 ‹⹀› or an equal U+003D ‹=›.

  +mySection("cantonese")
    a(href="cantonese") cantonese

  +mySection("mandarin")
    p: em under construction

    center
      table
        caption sumi
        tbody.consonant
          +toTrs(
            [ "b,p,m,f, "
            , "d,t,n, ,l"
            , "z,c, ,s, "
            , "ż,ċ, ,ṡ,r"
            , "ž,č, ,š, "
            , "g,k, ,h, "
            ]
            , ",")
        tbody.vowel
          tr
            td
            td
            td
            th.over-th(colspan="5") a
            th.over-th(colspan="5") e
          tr
            for x in ",,,,i,u,n,ŋ,,i,u,n,ŋ".split(",")
              th(align="right")= x
          tr
            th
            +toTds(",', a, ai, au, an, aŋ, e, ei, eu, en, eŋ".split(","))
          tr
            th i
            +toTds(",i,ia,iai,iau,ian,iaŋ,ie,   ,ieu,ien,ieŋ".split(","))
          tr
            th u
            +toTds(",u,ua,uai,   ,uan,uaŋ,ue,uei,   ,uen,ueŋ".split(","))
          tr
            th y
            +toTds(",y,  ,   ,   ,yan,   ,ye,   ,   ,yen,yeŋ".split(","))

      table
        caption sumi-ASCII
        tbody.consonant
          +toTrs(
            [ "b,p,m,f, "
            , "d,t,n, ,l"
            , "z,c, ,s, "
            , "zr,cr, ,sr,r"
            , "zh,ch, ,sh, "
            , "g,k, ,h, "
            ]
            , ",")
        tbody.vowel
          tr
            td
            td
            td
            th.over-th(colspan="5") a
            th.over-th(colspan="5") e
          tr
            for x in ",,,,i,u,n,q,,i,u,n,q".split(",")
              th(align="right")= x
          tr
            th
            +toTds(",', a, ai, au, an, aq, e, ei, eu, en, eq".split(","))
          tr
            th i
            +toTds(",i,ia,iai,iau,ian,iaq,ie,   ,ieu,ien,ieq".split(","))
          tr
            th u
            +toTds(",u,ua,uai,   ,uan,uaq,ue,uei,   ,uen,ueq".split(","))
          tr
            th y
            +toTds(",y,  ,   ,   ,yan,   ,ye,   ,   ,yen,yeq".split(","))

      table
        caption tones
        tbody.tone
          for xs in ["陰平|陰上|上|去|輕", "媽|麻|馬|罵|嗎"]
            tr
              td
                for x in xs.split("|")
                    th= x
          -
            let xss =
              [ ["IPA-letter",       "˥|˧˥|˧˩˥|˥˩|"]
              , ["IPA-diacritic",    "a\u0301|a\u030C|a\u1DC9|a\u0302|a"]
              , ["sumi-ASCII",       "-|/|~|\\|"]
              , ["pinyin-diacritic", "a\u0304|a\u0301|a\u030C|a\u0300|"]
              , ["pinyin-number",    "1|2|3|4|"]
              ]
          for xs in xss
            tr
              th(align="right")= xs[0]
              if xs[1]
                +toTds(xs[1].split("|"))
